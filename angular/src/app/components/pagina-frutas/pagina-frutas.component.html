<div id="frutas">


  <section>
    <div id="fondo">
      <h1>Servicio Rest para Frutas</h1>
      <app-alert [alert]="alert"></app-alert>

      <!--<div *ngIf="mensaje != ''" class="alert alert-warning alert-dismissible fade show" role="alert">
        <p>{{mensaje}}</p>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>-->
      <!--
      <input type="text" [(ngModel)]="nuevaFruta" placeholder="Añadir fruta" (click)="borrarNombre()">&nbsp;
      <input type="number" [(ngModel)]="nuevoPrecio" placeholder="precio">&nbsp;
      <input type="text" [(ngModel)]="nuevaImagen" placeholder="url de la imagen" (click)="borrarUrl()">&nbsp;
      <button (click)="new()" class="btn btn-outline-success"><i class="fas fa-plus-circle"></i></button>-->
      <div style="border:1px solid red; padding:10px;">
        <p>Valores: {{ formulario.value | json }}</p>
        <p>Estado: {{ formulario.status | json }}</p>
      </div>

      <form [formGroup]="formulario" (submit)="nueva()">
        <div class="container-fluid">
          <div class="row content">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="nombre"><b>Nombre</b></label>
                <input type="text" formControlName="nombre" class="form-control" placeholder="Mínimo 3 letras">
                <p *ngIf="formulario.controls.nombre.invalid && formulario.controls.nombre.touched" class="text-danger">*recuerda
                  que minimo 3 letras</p>
              </div>
              <table class="table">
                <thead>
                  <tr>
                    <th>Precio</th>
                    <th>Oferta</th>
                    <th>Descuento</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><input type="number" formControlName="precio" class="form-control"></td>
                    <td><input type="checkbox" formControlName="oferta" class="form-control"></td>
                    <td *ngIf="formulario.controls.oferta.value"><label for="descuento">Descuento <b>{{formulario.controls.descuento.value}}</b></label>
                      <input type="range" formControlName="descuento" step="5" min="0" max="100" class="form-control"></td>
                      
                  </tr>
                                   
              </table>
              <p *ngIf="formulario.controls.descuento.invalid" class="text-danger">*Debes seleecionar descuento</p>
              <div class="form-group">
                <label for="imagen"><b>Imagen</b></label>
                <input type="text" formControlName="imagen" class="form-control">
                <p *ngIf="formulario.controls.imagen.invalid && formulario.controls.imagen.touched"  
                  class="text-danger">*debe ser una URL de imagen valida empezar por http(s) y terminar .png o .jp(e)g</p>

              </div>

            </div>
            <div class="col-sm-6">
              <img src="{{formulario.controls.imagen.value}}" alt="url de la imagen de la nueva fruta" class="fotoForm">
            </div>

          </div>
          <button type="submit" class="btn btn-block btn-primary" [disabled]="formulario.invalid">
            {{(frutaSeleccionada.id == -1)?'Crear':'Modificar'}}
          </button>
        </div>
      </form>
    </div>
    <hr>
    
  </section>



</div>
<div>
  <table class="table table-bordered table-striped" id="fruteria">
    <thead class="bg-light">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Foto</th>
        <th scope="col">Nombre</th>
        <th scope="col">Precio</th>
        <th scope="col">Oferta</th>
        <th scope="col">Descuento</th>
        <th scope="col">Operaciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="frutas.length==0">
        <td colspan="3">Cargando datos...</td>
      </tr>
      <tr *ngFor="let f of frutas">
        <th scope="row">{{f.id}}</th>
        <td><img src="{{f.imagen}}" alt="imagen de la fruta {{f.nombre}}"></td>
        <td class="capitalize"><b>{{f.nombre}}</b></td>
        <td>{{f.precio | moneda}}</td>
        <td><i class="fas fa-{{(f.oferta==true)?'check':'times'}}"></i></td>
        <!--<td>{{(f.oferta==true)?'Sí':'No'}}</td>-->
        <td>{{(f.oferta==true)?f.descuento:'--'}}</td>
        <td>
          <i id = "editar" class="fas fa-edit mr-4" (click)="editar(f)"></i>
          <i id = "borrar" class="fas fa-trash-alt" (click)="delete(f)"></i>
        </td>
      </tr>
    </tbody>
  </table>
</div>


<!-- <div class="form-group">
            <label for="nombre">Precio</label>&nbsp;
            <input type="number" formControlName="precio" class="form-control">
          </div>&nbsp;
          <div class="form-group">
            <label for="oferta">Oferta</label>&nbsp;
            <input type="checkbox" formControlName="oferta" class="form-control">
            &nbsp;
            <div *ngIf="formulario.controls.oferta.value">
              <label for="descuento">Descuento <b>{{formulario.controls.descuento.value}}</b></label>
              <input type="range" formControlName="descuento" step="5" min="0" max="100" class="form-control">
            </div>
          </div>-->

          <!--<ul>
      <li *ngFor="let fruta of frutas">
        <input type="checkbox" [checked]="fruta.agotada" (click)="change(fruta)">
        <img src="{{fruta.imagen}}" alt="{{fruta.nombre}}" class=" afoto mr-3 rounded-circle shadow p-1 bg-white rounded">
        <span [class]="(fruta.agotada)?'agotada':''">{{fruta.nombre | uppercase}} <b>{{fruta.precio| moneda}}</b></span>&nbsp;
        <button (click)="editar(fruta)" class="btn btn-outline-info"><i class="far fa-edit"></i>
        </button>&nbsp;
        <button (click)="delete(fruta)" class="btn btn-outline-danger"><i class="fas fa-backspace"></i>
        </button>

      </li>
    </ul>-->

    <!--
      pattern="(http(s?):)([/|.|\w|\s|-])*\.(?:jp(e?)g|gif|png)"
    -->