<div class="col-12">
  <h1>CRUD Frutas</h1>
  <div *ngIf="mensaje.texto !=''" class="alert alert-{{mensaje.tipo}}" role="alert">
      {{ mensaje.texto }}
  </div>

  <div class="border border-danger p-2">
    <p>Valores: {{ formulario.value | json }}</p>
    <p>Estado: {{ formulario.status | json }}</p>
    <p>Oferta: {{ formulario.value.oferta | json }}</p>
  </div>

      <form [formGroup]="formulario" (submit)="nueva()">
        <div class="col-12 d-flex flex-row flex-wrap">
          <div class="form-group col-6">
            <label for="nombre">Nombre</label>
            <input type="text" formControlName="nombre"
            class="form-control" placeholder= "Nombre de la fruta (Minimo 3 letras)">
            <small *ngIf="formulario.controls.nombre.invalid && formulario.controls.nombre.touched" class="text-danger">*Nombre no válido</small>
          </div>
          <div class="form-group col-6">
            <label for="precio">Precio</label>
            <input type="number" formControlName="precio"
            class="form-control" placeholder= "Precio de la fruta">
            <small *ngIf="formulario.controls.precio.invalid && formulario.controls.precio.touched" class="text-danger">*Precio no válido</small>
          </div>
          <div class="form-group col-6">
              <input type="checkbox" name="oferta" formControlName="oferta">
              Quiero poner una oferta a este producto
          </div>
          <div *ngIf="formulario.value.oferta" class="form-group col-12">
              <label for="descuento">Descuento <b>{{ formulario.controls.descuento.value }} %</b></label>
              <input type="range" formControlName="descuento"
              class="form-control" min="0" max="99" >
          </div>
          <div class="form-group col-12">
            <label for="imagen">Imagen</label>
            <input type="text" formControlName="imagen"
            class="form-control" placeholder= "Imagen de la fruta">
          </div>
        </div>
        <button type="submit"
            class="btn btn-block btn-primary"
            [disabled]="formulario.invalid">
            {{(frutaSeleccionada.id == -1)?'Crear':'Modificar'}}
        </button>
          <!-- <button *ngIf="frutaNueva.id === -1" type="submit" [disabled]="formulario.invalid" class="btn btn-success">Crear</button>
          <button *ngIf="frutaNueva.id !== -1" class="btn btn-info" (click)="modificar(fruta)">Editar</button>
          <button *ngIf="frutaNueva.id !== -1" class="btn btn-warning" (click)="limpiar()">Borrar datos</button> -->
      </form>

  <div class="d-flex flex-row flex-wrap justify-content-between">
    <div *ngFor="let fruta of frutas"
      class="col-5 d-flex justify-content-around align-items-center border border-secondary m-1">
      
      <img class="rounded-circle shadow p-1 bg-primary rounded" src="{{fruta.imagen}}" alt="fruta.nombre">   
         
      <div class="d-flex flex-column justify-content-start align-items-start">
        <b>{{fruta.nombre}}</b>
        
      </div>
      <span *ngIf="fruta.oferta" class="d-flex flex-column">
        <del class="text-secondary">
          {{ fruta.precio | moneda: 'es' }}
        </del>
        {{ fruta.precio - ((fruta.precio * fruta.descuento) / 100) | number: '1.0-2' | moneda: 'es' }}
        <span class="badge badge-primary">{{ fruta.descuento | moneda: 'desc' }}</span>
      </span>
      <span *ngIf="!fruta.oferta" class="d-flex flex-column">
        {{ fruta.precio }}
        <span class="badge badge-danger">{{ 0 | moneda: 'desc' }}</span>
      </span>
      <i (click)="editar(fruta)" class="fas fa-edit"></i>
      <i (click)="delete(fruta)" class="fas fa-trash-alt"></i>
     </div> <!-- div For -->
</div>
</div>


  
  
